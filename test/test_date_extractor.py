"""
ë‚ ì§œ ì¶”ì¶œê¸° í…ŒìŠ¤íŠ¸
"""
import os, sys
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
from utils.parser.date_extractor import DateExtractor

# ========== í…ŒìŠ¤íŠ¸ ì½”ë“œ ==========

def test_date_extractor():
    """ë‚ ì§œ ì¶”ì¶œê¸° í…ŒìŠ¤íŠ¸"""
    extractor = DateExtractor()
    
    test_cases = [
        {
            'text': 'ì¼ì‹œ Date : 2025. 11. 23 ì¼Sun\nê³µì—°ì‹œê°„ Gig Time : 19:00',
            'expected': '2025-11-23 19:00'
        },
        {
            'text': '2025.11.14 (FRI) 7:30 PM',
            'expected': '2025-11-14 19:30'
        },
        {
            'text': '2025/11/16 (Sun) 10pm',
            'expected': '2025-11-16 22:00'
        },
        {
            'text': 'ê³µì—°ë‚ ì§œ : 28.NOV.2025 ê³µì—°ì‹œê°„ : 8PM',
            'expected': '2025-11-28 20:00'
        },
        {
            'text': '2025.11.15 (SAT)\nat CLUB FF',
            'expected': '2025-11-15 19:00'
        },
        {
            'text': 'ì¼ì‹œ: 2025.10.24\nì¥ì†Œ: í´ëŸ½ë¹µ\nì‹œê°„: 20:00',
            'expected': '2025-10-24 20:00'
        },
        {
            'text': '2025. 11. 7 ê¸ˆFri ì €ë… 7ì‹œ',
            'expected': '2025-11-07 19:00'
        },
        {
            'text': '2025.11.15 (SAT) \nOPEN 15:30',
            'expected': '2025-11-15 15:30'
        },
        {
            'text': '2025/11/14 (FRI) 7:00pm',
            'expected': '2025-11-14 19:00'
        },
        {
            'text': 'ê³µì—°ë‚ ì§œ : 28.NOV.2025\nê³µì—°ì‹œê°„ : 8PM',
            'expected': '2025-11-28 20:00'
        },
        {
            'text': 'ğŸ“… 11/29 (í† ) 19:00',
            'expected': '2025-11-29 19:00'
        },
        {
            'text': '2025. 11. 23 ì¼Sun\nê³µì—°ì‹œê°„ Gig Time : 19:00',
            'expected': '2025-11-23 19:00'
        },
        {
            'text': '2025ë…„ 11ì›” 14ì¼(ê¸ˆ) ì €ë… 7ì‹œ',
            'expected': '2025-11-14 19:00'
        },
        {
            'text': '2025.12.14 SUN\nOPEN 17:00',
            'expected': '2025-12-14 17:00'
        },
        {
            'text': '2025ë…„ 11ì›” 17ì¼ ì›”ìš”ì¼ ì €ë… 8ì‹œ',
            'expected': '2025-11-17 20:00'
        },
        {
            'text': '25.11.29 í† ìš”ì¼ 7ì‹œ',
            'expected': '2025-11-29 19:00'
        },
        {
            'text': '2025ë…„ 11ì›” 28ì¼ ê¸ˆìš”ì¼ ì˜¤í›„ 8ì‹œ',
            'expected': '2025-11-28 20:00'
        },
        {
            'text': 'ì›ƒë‹¤ê°€ ì£½ì–´ë„ ì±…ì„ì•ˆì§€ëŠ” ë¦¬ì–¼ raw ë†ë‹´ì˜ ë¬´ë¤ ì˜¤í”ˆë§ˆì´í¬! âš°ï¸ğŸª¦\n\nì˜¤í”ˆë§ˆì´í¬ëŠ” ë†ë‹´ì„ ì‹¤í—˜í•´ë³´ê³  ì—°ìŠµí•˜ëŠ” ê³µê°„ì…ë‹ˆë‹¤. ë¶€ë‹´ê°–ì§€ ë§ˆì‹œê³  ìŠ¤íƒ ë“œì—…ì— ë„ì „í•´ë³´ì„¸ìš”! ğŸ¤\n\nì¼ì‹œ: 11ì›” 28ì¼ (ê¸ˆ) 8PM\n(8PM ì…ì¥/ì‹¸ì¸ì—… ì‹œì‘ 8:30PM ê³µì—° ì‹œì‘)\nì¥ì†Œ: ì˜¤ë°©ê°€ë¥´ë“œ (ë¶€ì‚° ë‚¨êµ¬ ìš©ì†Œë¡œ7ë²ˆê¸¸ 15-1 ì§€í•˜)\n\nì°¸ê°€ë°©ë²•:\n1ï¸âƒ£ @busancomedyclub ìœ¼ë¡œ ì°¸ê°€ ì‹ ì²­ ë””ì— ì„ ë³´ë‚¸ë‹¤. í™•ì¸ ë‹µë³€ì´ ì™”ìœ¼ë©´ ë¬´ëŒ€ëŠ” í™•ì •!\n2ï¸âƒ£ 5ë¶„ ê°€ëŸ‰ì˜ ë†ë‹´ì„ ì¤€ë¹„í•œë‹¤. \n3ï¸âƒ£ ì˜ ì›ƒëŠ” ì¹œêµ¬ë¥¼ ë°ë¦¬ê³  ì˜¤ë°©ê°€ë¥´ë“œë¡œ ì˜¨ë‹¤!\n\n* ì˜ˆë§¤ ì•ˆí•˜ì…”ë„ ë˜ëŠ” ë¬´ë£Œ ê³µì—°ì…ë‹ˆë‹¤\n* 1ì¸ 1ì£¼ë¬¸ í•„ìˆ˜ì…ë‹ˆë‹¤! ğŸ¹\n* ë³¸ ê³µì—°ì€ 19ê¸ˆ ê³µì—°ì…ë‹ˆë‹¤ ğŸ”\n\n#ë¶€ì‚°ì½”ë¯¸ë””í´ëŸ½ #ì›ƒê¸´ì˜ìƒ #ê°œì›ƒê¹€ #ìŠ¤íƒ ë“œì—…ì½”ë¯¸ë”” #ìŠ¤íƒ ë“œì—… #ë¶€ì‚°ìŠ¤íƒ ë“œì—…ì½”ë¯¸ë”” #ë¶€ì‚°í•«í”Œ #ê²½ì„±ëŒ€ #ê²½ì„±ëŒ€í•«í”Œ #ë¶€ì‚°ëŒ€ #BusanComedyClub #StandupBusan #ë¶€ì‚°ê°ˆë§Œí•œë° #ë¶€ì‚°ë°ì´íŠ¸ #ë¶€ì‚°ì´ìƒ‰ë°ì´íŠ¸',
            'expected': '2025-11-28 20:00'
        }
    ]
    
    print("=" * 60)
    print("ë‚ ì§œ ì¶”ì¶œê¸° í…ŒìŠ¤íŠ¸")
    print("=" * 60)
    
    for i, case in enumerate(test_cases, 1):
        result = extractor.extract(case['text'])
        expected = case['expected']
        
        status = "âœ… ì„±ê³µ" if result == expected else "âŒ ì‹¤íŒ¨"
        print(f"\ní…ŒìŠ¤íŠ¸ {i}: {status}")
        print(f"  ì…ë ¥: {case['text'][:50]}...")
        print(f"  ì˜ˆìƒ: {expected}")
        print(f"  ê²°ê³¼: {result}")


if __name__ == "__main__":
    test_date_extractor()